<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thirty Seconds Game - Multiplayer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="multiplayer.css">
</head>
<body>
    <div id="app">
        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <h1>ğŸ² Thirty Seconds</h1>
            <p class="subtitle">The Quick Thinking, Fast Talking Game!</p>
            
            <div class="multiplayer-options">
                <div class="option-card">
                    <h3>ğŸ® Host a Game</h3>
                    <p>Create a room and invite friends</p>
                    <input type="text" id="host-name" placeholder="Your name" maxlength="20">
                    <button onclick="createRoom()">Create Room</button>
                </div>

                <div class="option-card">
                    <h3>ğŸš€ Join a Game</h3>
                    <p>Enter the room code to join</p>
                    <input type="text" id="room-code-input" placeholder="Room Code" maxlength="5" style="text-transform: uppercase;">
                    <input type="text" id="player-name" placeholder="Your name" maxlength="20">
                    <button onclick="joinRoom()" class="secondary">Join Room</button>
                </div>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen">
            <h2>ğŸ  Game Lobby</h2>
            
            <div class="room-code-box">
                <p>Room Code:</p>
                <h1 id="room-code-display">-----</h1>
                <p class="muted">Share this code with your friends!</p>
            </div>

            <div class="lobby-content">
                <div class="unassigned-section">
                    <h3>ğŸ‘¥ Players Waiting</h3>
                    <div id="unassigned-players"></div>
                </div>

                <div class="teams-section">
                    <div class="team-column red">
                        <h3>ğŸ”´ Team Red</h3>
                        <div id="lobby-team-red"></div>
                    </div>
                    <div class="team-column blue">
                        <h3>ğŸ”µ Team Blue</h3>
                        <div id="lobby-team-blue"></div>
                    </div>
                </div>
            </div>

            <div id="host-controls">
                <div class="game-options">
                    <label>
                        Winning Score:
                        <input type="number" id="winning-score-lobby" value="30" min="10" max="50" onchange="updateWinningScore()">
                    </label>
                </div>
                <button onclick="startMultiplayerGame()" class="big-button">Start Game!</button>
            </div>

            <div id="waiting-message" style="display: none;">
                <p class="muted">â³ Waiting for host to start the game...</p>
            </div>

            <div class="button-group">
                <button onclick="leaveRoom()" class="danger">Leave Room</button>
            </div>
        </div>

        <!-- Multiplayer Game Screen -->
        <div id="mp-game-screen" class="screen">
            <h2>ğŸ² Game Board</h2>
            
            <div class="scoreboard">
                <div class="team-score red">
                    <h3>ğŸ”´ Team Red</h3>
                    <span id="mp-red-score">0</span>
                </div>
                <div class="team-score blue">
                    <h3>ğŸ”µ Team Blue</h3>
                    <span id="mp-blue-score">0</span>
                </div>
            </div>

            <div class="current-turn">
                <p>Current Turn: <span id="mp-current-team"></span></p>
                <p>Explainer: <span id="mp-current-explainer"></span></p>
            </div>

            <button onclick="startRoundMultiplayer()" id="start-round-mp-btn" class="big-button">Start Round</button>
            
            <div id="waiting-for-explainer" class="waiting-box"></div>
        </div>

        <!-- Multiplayer Round Screen -->
        <div id="mp-round-screen" class="screen">
            <div class="timer-container">
                <div id="mp-timer">30</div>
                <div class="timer-label">seconds</div>
            </div>

            <div id="mp-words-container" class="current-card"></div>
        </div>

        <!-- Multiplayer Scoring Screen -->
        <div id="mp-scoring-screen" class="screen">
            <h2>â±ï¸ Time's Up!</h2>
            
            <div id="mp-scoring-controls">
                <p>Click the words your team guessed correctly:</p>
                <div id="mp-scoring-words"></div>
                <div class="score-summary">
                    <p>Words correct: <span id="mp-words-correct">0</span></p>
                </div>
                <button onclick="submitScoreMultiplayer()">Submit & Continue</button>
            </div>

            <div id="mp-scoring-waiting" style="display: none;">
                <p class="muted">Waiting for scores to be submitted...</p>
            </div>
        </div>

        <!-- Multiplayer Winner Screen -->
        <div id="mp-winner-screen" class="screen">
            <h1>ğŸ† Game Over!</h1>
            <h2 id="mp-winner-announcement"></h2>
            
            <div class="final-scores">
                <div class="final-score red">
                    <h3>ğŸ”´ Team Red</h3>
                    <span id="mp-final-red-score">0</span>
                </div>
                <div class="final-score blue">
                    <h3>ğŸ”µ Team Blue</h3>
                    <span id="mp-final-blue-score">0</span>
                </div>
            </div>

            <button onclick="playAgainMultiplayer()" id="mp-play-again-btn">Play Again</button>
            <button onclick="leaveRoom()" class="secondary">Leave Room</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    
    <!-- Firebase Config (gitignored - contains API keys) -->
    <script src="firebase-config.js"></script>
    
    <!-- Game Logic -->
    <script src="firebase-game.js"></script>
</body>
</html>
